var reviews = [
    {
        "id": 1,
        "firstname": "Lukas",
        "lastname": "Beck",
        "feedback": "neueueueue",
        "points": [
            {
                "type": "point",
                "title": "neueueueue",
                "content": "neueueueue",
                "points": 100,
                "weight": 1
            }
        ]
    },
    {
        "id": 2,
        "firstname": "Lukas",
        "lastname": "Beck",
        "feedback": "",
        "points": []
    },
    {
        "id": 3,
        "firstname": "Thomas",
        "lastname": "Wally",
        "feedback": "Das hast du wirklich gut gemacht, aber dies und das geht nicht wie erwartet.",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil dies und das nicht wie erwartet ging, gibt es 1 punkt abzug",
                "points": 9,
                "weight": 1
            }
        ]
    },
    {
        "id": 4,
        "firstname": "Kacper",
        "lastname": "Urbaniec",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 5,
        "firstname": "Océanne",
        "lastname": "Free",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 6,
        "firstname": "Stéphanie",
        "lastname": "Reddin",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 7,
        "firstname": "Crééz",
        "lastname": "McGaugan",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 8,
        "firstname": "Rachèle",
        "lastname": "Sullivan",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 9,
        "firstname": "Aurélie",
        "lastname": "Grissett",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 10,
        "firstname": "Marie-josée",
        "lastname": "Windeatt",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 11,
        "firstname": "Lukas",
        "lastname": "Beck",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 12,
        "firstname": "Kacper",
        "lastname": "Urbaniec",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 13,
        "firstname": "Océanne",
        "lastname": "Free",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 14,
        "firstname": "Stéphanie",
        "lastname": "Reddin",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 15,
        "firstname": "Crééz",
        "lastname": "McGaugan",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 16,
        "firstname": "Rachèle",
        "lastname": "Sullivan",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 17,
        "firstname": "Aurélie",
        "lastname": "Grissett",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    },
    {
        "id": 18,
        "firstname": "Marie-josée",
        "lastname": "Windeatt",
        "feedback": "Das ist eine sehr schöne Abgabe",
        "points": [
            {
                "type": "point",
                "title": "Bewertung",
                "content": "Weil das so gut war, volle punkte zahl",
                "points": 10,
                "weight": 1
            }
        ]
    }
]

/**
 * Editiert ein Review
 * @param id Id des zu bearbeitenden Reviews
 * @param review Das neue Review Object
 */
function updateReview(id, feedback, points){
    var count = 0;
    reviews.forEach(rev => {
        if(rev.id == id){
            reviews[count].feedback = feedback;
            reviews[count].points = points;
        }
        count++;
    })
}

/**
 * Fügt ein Review mit neuer ID hinzu
 * @param review Neues Review
 */
function addReview(review){
    var newId = getNextId();
    reviews.push(
        {
            id: newId,
            firstname: review.firstname,
            lastname: review.lastname,
            feedback: review.feedback,
            points: review.points
        }
    )
    return newId;
}

/**
 * Löscht ein review
 * @param id Id des reviews das zu löschen ist
 */
function delReview(id){
    reviews = reviews.filter(s => s.id != id);
}

/**
 * Holt alle Reviews
 * @return {[{feedback: string, id: number, points: [{weight: number, type: string, title: string, content: string, points: number}]}]} Alle Reviews in einem Array
 */
function getAll(){
    return reviews;
}

/**
 * Holt ein Review anhand der ID
 * @param id Id des zu holenden Reviews
 * @return {{feedback: string, id: number, points: [{weight: number, type: string, title: string, content: string, points: number}]}[]} Das Review das zu holen ist
 */
function getReview(id){
    return reviews.filter(s => s.id == id);
}

/**
 * Erzeugt eine neue ID
 * @return {*} Neue id
 */
function getNextId(){
    if(reviews.length == 0){
        return 1
    }else {
        return reviews[reviews.length - 1].id + 1;
    }
}

module.exports = {
    addReview,
    delReview,
    getAll,
    getReview,
    getNextId,
    updateReview
}